{% extends 'dashboard.html' %}
{% load static %}
{% block content %}
    {% include "top_header.html" %}
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            {% include 'sidebar.html' %}

            <!-- Main content -->
            <main class="col-md-7 ms-sm-auto col-lg-8 px-md-4">
                <div class="mt-5">
                    <h1>Quest List</h1>
                    <form id="quest-search-form" class="mb-4">
                        <input type="text" id="quest-search-input" class="form-control" placeholder="Search quests..." style="width: 50%; display: inline-block;">
                        <button type="submit" class="btn btn-primary ml-2">Search</button>
                    </form>

                    <div id="quest-list">
                        {% include 'progres_tracker/partials/quest_list.html' %}
                    </div>

                    <a href="{% url 'dashboard' %}" class="btn btn-primary mt-3">Back</a>
                </div>
            </main>
            <!-- Right margin -->
            <div class="col-md-2 d-none d-md-block bg-light"></div>
        </div>
    </div>

    <script>
        document.getElementById('quest-search-form').addEventListener('submit', function(event) {
            event.preventDefault();
            let query = document.getElementById('quest-search-input').value;
            fetch("{% url 'quest_search' %}?q=" + query)
                .then(response => response.json())
                .then(data => {
                    let questList = document.getElementById('quest-list');
                    questList.innerHTML = data.html;
                });
        });
    </script>
{% endblock %}
